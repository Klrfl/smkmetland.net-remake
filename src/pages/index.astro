---
import Layout from "@layouts/Layout.astro";
import NavBar from "@src/components/NavBar.astro";
import BlogThumb from "@src/components/BlogThumb.astro";
import Footer from "@src/components/Footer.astro";

import { Image } from "@astrojs/image/components";
import { SITE_TITLE, SITE_DESCRIPTION } from "@src/scripts/consts";

const perusahaanArr = [
	{
		nama: "Perusahaan",
		link: "#",
	},
	{
		nama: "Perusahaan",
		link: "#",
	},
	{
		nama: "Perusahaan",
		link: "#",
	},
	{
		nama: "Perusahaan",
		link: "#",
	},
	{
		nama: "Perusahaan",
		link: "#",
	},
	{
		nama: "Perusahaan",
		link: "#",
	},
];

import { POSTS_ENDPOINT } from "@src/scripts/consts.js";
const request = await fetch(POSTS_ENDPOINT);
const beritaArr = await request.json();
---

<Layout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<NavBar />
	<div class="wrapper">
		<section class="hero">
			<div class="hero__image">
				<Image
					src="/assets/hero-image.jpeg"
					alt="Foto SMK tercintah"
					width={700}
					aspectRatio="3:2"
					format="webp"
				/>
			</div>
			<div class="hero__text">
				<h1>SMK Metland</h1>
				<p>
					Gua mau buat ulang <a href="https://smkmetland.net">smkmetland.net</a
					>. Jelek banget soalnya...
				</p>
				<p>
					Situs ini masih dalam tahap pengembangan, jadi jangan ngomong
					aneh-aneh dulu yah
				</p>
			</div>
		</section>

		<section class="main-section" id="infografi">
			<div class="main-section__content">
				<h2>Infografi</h2>
				<div class="infografi card-container">
					<div class="infografi__card card">
						<h3><span class="stat">619</span> Siswa</h3>
						<i class="fa-solid fa-user-friends"></i>
					</div>
					<div class="infografi__card card">
						<h3><span class="stat">68</span> Guru</h3>
						<i class="fa-solid fa-chalkboard-teacher"></i>
					</div>
					<div class="infografi__card card">
						<h3><span class="stat">42</span> Tenaga Pendidikan & Caraka</h3>
						<i class="fa-solid fa-people-group"></i>
					</div>
				</div>
			</div>
		</section>

		<section class="main-section" id="program-keahlian">
			<div class="main-section__content">
				<h2>Program Keahlian</h2>
				<p>Jangan masuk PPLG ya.</p>

				<div class="jurusan card-container">
					<a href="/program-keahlian/perhotelan" class="jurusan__card card">
						<p>Perhotelan</p>
						<i class="fa-solid fa-hotel"></i>
					</a>
					<a href="/program-keahlian/tb" class="jurusan__card card">
						<p>Tata Boga</p>
						<i class="fa-solid fa-utensils"></i>
					</a>
					<a href="/program-keahlian/pplg" class="jurusan__card card">
						<p>PPLG</p>
						<i class="fa-solid fa-terminal"></i>
					</a>
					<a href="/program-keahlian/akutansi" class="jurusan__card card">
						<p>Akutansi</p>
						<i class="fa-solid fa-money-bill"></i>
					</a>
					<a href="/program-keahlian/dkv" class="jurusan__card card">
						<p>DKV</p>
						<i class="fa-solid fa-camera"></i>
					</a>
				</div>
			</div>
		</section>

		<section class="main-section" id="kerjasama-industri">
			<div class="main-section__content">
				<h2>Kerjasama Industri</h2>
				<div class="perusahaan card-container">
					{
						perusahaanArr.map((perusahaan) => (
							<div class="perusahaan__card card">
								<a href={perusahaan.link}>
									<p>{perusahaan.nama}</p>
								</a>
							</div>
						))
					}
				</div>
			</div>
		</section>

		<section class="main-section" id="berita-sekolah">
			<div class="main-section__content">
				<h2>Berita Sekolah</h2>

				<div class="berita card-container">
					<ul class="berita-list">
						{beritaArr.map((berita) => <BlogThumb post={berita} />)}
					</ul>

					<a href="/berita-sekolah">Lihat lebih banyak</a>

					<!-- <div class="berita__card card">
						<div class="berita__card-image">
							<img src="" alt="ceritanya gambar berita" />
						</div>
						<div class="berita__card-text">
							<p>Ini ceritanya berita</p>
						</div>
					</div> -->
				</div>
			</div>
		</section>
		<Footer />
	</div>
</Layout>

<style lang="scss">
	@use "../styles/abstracts/" as *;

	.wrapper {
		max-height: 100vh;
		overflow: hidden auto;
		perspective: 10px;
		transform-style: preserve-3d;
	}

	.hero {
		min-height: 90vh;
		transform-style: preserve-3d;
		position: relative;
		z-index: -1;

		display: flex;
		justify-content: center;
		align-items: flex-end;
	}

	.hero__text {
		background: linear-gradient(to top, #1b1b1b, #1b1b1bcc);
		backdrop-filter: blur(0.5rem);
		color: #ddd;
		padding: 2rem;
		flex-grow: 1;

		p {
			max-width: 75ch;
		}
	}

	.hero__image {
		position: absolute;
		inset: 0;
		transform: translateZ(-10px) scale(2);
		width: 100vw;
		height: 100vh;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
	}

	#daftar {
		background: var(--accent);
		padding: 1rem 2rem;
		border-radius: 2rem;

		&:hover {
			background: var(--accent-hover);
		}
	}

	.main-section {
		background: var(--main-section-bg);
		padding: 2rem;
		color: var(--main-section-color);

		h2 {
			position: relative;
			width: max-content;

			&::before {
				content: "";
				background: var(--accent);
				position: absolute;
				bottom: -0.4rem;
				width: calc(100% + 10px);
				height: 3px;
			}
		}
		&__content {
			max-width: 105ch;
			margin: auto;
		}
	}

	.card-container {
		@include card-container;
	}
	.card {
		@include card;
	}

	// infografi
	.infografi__card {
		outline: 2px solid #444;
	}

	// program keahlian
	.jurusan__card {
		color: inherit;
		text-decoration: none;

		outline: 2px solid #444;
		min-width: 15ch;
		aspect-ratio: 1/1;
		transition: transform 200ms cubic-bezier(0, 1, 0.7, 1.5), outline 200ms ease;

		&:hover {
			transform: scale(1.1);
			outline: 2px solid #888;
		}
	}

	// kerjasama industri
	.perusahaan__card {
		flex: 1 1 0;
		background: #232323;

		&:hover {
			background: #333;
			cursor: pointer;
		}
	}

	.berita-list {
		list-style: none;
		margin: 0;
		padding: 0;

		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
		gap: 1rem;
	}
</style>
